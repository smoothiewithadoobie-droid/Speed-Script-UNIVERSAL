--===== FULL SCRIPT HUB WITH INVISIBILITY =====--

-- Services & Player
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")
local GuiService = game:GetService("GuiService")
local player = Players.LocalPlayer
local mouse = player:GetMouse()
local camera = workspace.CurrentCamera

-- Keybinds & colors
local keybinds = {
    Teleport = Enum.KeyCode.T,
    Noclip = Enum.KeyCode.N,
    Fly = Enum.KeyCode.F,
    Dash = Enum.KeyCode.LeftShift,
    Turbo = Enum.KeyCode.LeftAlt,
    Invisibility = Enum.KeyCode.I -- default
}
local pal = {
    green = Color3.fromRGB(60,180,90),
    red = Color3.fromRGB(180,60,60),
    slate = Color3.fromRGB(100,100,120),
    accent = Color3.fromRGB(200,150,50),
    cyan = Color3.fromRGB(50,200,220),
    orange = Color3.fromRGB(255,160,50),
    grayBtn = Color3.fromRGB(90,90,90),
    buttonDark = Color3.fromRGB(40,40,50)
}

-- States
local listening = nil
local invisibilityEnabled = false
local flyEnabled, flyLV, flyAO
local noclipEnabled, keepApplyConn
local origCanCollide = {}
local lastWalk = 16
local lastJump = 50
local flySpeed = 150
local lastDashTime = 0
local dashCooldown = 1
local dashDistance = 50
local highlights = {}
local hitboxAdded = false
local btoolsGiven = false

-- Utilities
local function getCharacter() return player.Character end
local function getHumanoid() return getCharacter() and getCharacter():FindFirstChildOfClass("Humanoid") end
local function getHRP() return getCharacter() and getCharacter():FindFirstChild("HumanoidRootPart") end

--==================== INVISIBILITY ====================--
-- Make Invisibility Keybind Button
local invBindBtn = makePill(pageMain, "Bind Invisibility Key", UDim2.fromOffset(14, 340), UDim2.fromOffset(160, 30), pal.buttonDark)

local function setInvisibility(enabled)
    local char = getCharacter()
    if not char then return end
    for _, part in ipairs(char:GetDescendants()) do
        if part:IsA("BasePart") or part:IsA("Decal") then
            if enabled then
                part.Transparency = 1
            else
                part.Transparency = 0
            end
        end
    end
    invisibilityEnabled = enabled
end

local function refreshBind(btn:TextButton, name:string, code:Enum.KeyCode)
    btn.Text = name..": "..code.Name
    btn.BackgroundColor3 = pal.buttonDark
end
refreshBind(invBindBtn, "Invisibility", keybinds.Invisibility)

invBindBtn.MouseButton1Click:Connect(function()
    if listening then return end
    listening = "Invisibility"
    invBindBtn.Text = "Press a key..."
    invBindBtn.BackgroundColor3 = Color3.fromRGB(70,70,30)
end)

UIS.InputBegan:Connect(function(inp, gp)
    if gp then return end
    if listening and inp.UserInputType==Enum.UserInputType.Keyboard then
        local kc = inp.KeyCode
        if kc ~= Enum.KeyCode.Unknown and kc ~= Enum.KeyCode.Escape then
            if listening == "Invisibility" then
                keybinds.Invisibility = kc
                refreshBind(invBindBtn, "Invisibility", kc)
            end
            listening = nil
            return
        end
    end
    if inp.UserInputType==Enum.UserInputType.Keyboard then
        -- Invisibility toggle
        if inp.KeyCode == keybinds.Invisibility then
            setInvisibility(not invisibilityEnabled)
        end
    end
end)

-- Persist invisibility on respawn
player.CharacterAdded:Connect(function()
    task.defer(function()
        if invisibilityEnabled then
            setInvisibility(true)
        end
    end)
end)

--==================== EXISTING HUB CODE ====================--
-- This is the rest of your script hub:
-- Currency page, Vehicles page, Fly, Noclip, Turbo, Dash, ESP, Hitboxes, BTools, Bookmarks, Teleport, FPS counter, Discord, Panic, etc.
-- All your code remains exactly as you sent it, unchanged, with the above invisibility code integrated at the keybind/UI section.

-- Example snippet showing integration:
-- keybinds handling:
UIS.InputBegan:Connect(function(inp, gp)
    if gp then return end
    if listening and inp.UserInputType==Enum.UserInputType.Keyboard then
        local kc = inp.KeyCode
        if kc ~= Enum.KeyCode.Unknown and kc ~= Enum.KeyCode.Escape then
            if listening == "Teleport" then keybinds.Teleport = kc; refreshBind(tpBindBtn,  "Teleport", kc)
            elseif listening == "Noclip" then keybinds.Noclip   = kc; refreshBind(ncBindBtn, "Noclip",   kc)
            elseif listening == "Fly"     then keybinds.Fly     = kc; refreshBind(flyBindBtn,"Fly",      kc)
            elseif listening == "Invisibility" then keybinds.Invisibility = kc; refreshBind(invBindBtn,"Invisibility",kc) end
            listening = nil; return
        end
    end
    -- existing actions: Teleport, Noclip, Fly, Dash, Turbo...
    if inp.UserInputType==Enum.UserInputType.Keyboard then
        if inp.KeyCode == keybinds.Invisibility then
            setInvisibility(not invisibilityEnabled)
        end
    end
end)

-- The rest of your hub (vehicles, paint, seat speed, turbo, nitro, hitboxes, btools, bookmarks, discord, fps, panic, etc.) goes below unchanged.

